#!/bin/sh

# Configure a build directory.

set -eu

# If the user hasn't set a srcdir, try to auto-detect it. Assume that this
# configure script is in the desired srcdir.

if [ -z "${srcdir:-}" ]; then
    srcdir=$(cd "$( dirname "$0" )" && pwd)
    printf 'Auto-detected source directory: srcdir=%s\n' "$srcdir"
fi

if [ -z "${builddir:-}" ]; then
    builddir="$(pwd)"
    printf 'Auto-detected build directory: builddir=%s\n' "$builddir"
fi

printf "srcdir=%s\n" "$srcdir" > "$builddir/config.sh"
printf "builddir=%s\n" "$builddir" >> "$builddir/config.sh"
